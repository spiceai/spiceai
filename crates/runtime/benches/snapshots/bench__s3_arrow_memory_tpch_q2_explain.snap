---
source: crates/runtime/benches/bench.rs
description: "Query: select\n    s_acctbal,\n    s_name,\n    n_name,\n    p_partkey,\n    p_mfgr,\n    s_address,\n    s_phone,\n    s_comment\nfrom\n    part,\n    supplier,\n    partsupp,\n    nation,\n    region\nwhere\n        p_partkey = ps_partkey\n  and s_suppkey = ps_suppkey\n  and p_size = 15\n  and p_type like '%BRASS'\n  and s_nationkey = n_nationkey\n  and n_regionkey = r_regionkey\n  and r_name = 'EUROPE'\n  and ps_supplycost = (\n    select\n        min(ps_supplycost)\n    from\n        partsupp,\n        supplier,\n        nation,\n        region\n    where\n            p_partkey = ps_partkey\n      and s_suppkey = ps_suppkey\n      and s_nationkey = n_nationkey\n      and n_regionkey = r_regionkey\n      and r_name = 'EUROPE'\n)\norder by\n    s_acctbal desc,\n    n_name,\n    s_name,\n    p_partkey;"
---
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| plan_type     | plan                                                                                                                                                                                                                                                                                      |
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| logical_plan  | Sort: supplier.s_acctbal DESC NULLS FIRST, nation.n_name ASC NULLS LAST, supplier.s_name ASC NULLS LAST, part.p_partkey ASC NULLS LAST                                                                                                                                                    |
|               |   Projection: supplier.s_acctbal, supplier.s_name, nation.n_name, part.p_partkey, part.p_mfgr, supplier.s_address, supplier.s_phone, supplier.s_comment                                                                                                                                   |
|               |     Inner Join: part.p_partkey = __scalar_sq_1.ps_partkey, partsupp.ps_supplycost = __scalar_sq_1.min(partsupp.ps_supplycost)                                                                                                                                                             |
|               |       Projection: part.p_partkey, part.p_mfgr, supplier.s_name, supplier.s_address, supplier.s_phone, supplier.s_acctbal, supplier.s_comment, partsupp.ps_supplycost, nation.n_name                                                                                                       |
|               |         Inner Join: nation.n_regionkey = region.r_regionkey                                                                                                                                                                                                                               |
|               |           Projection: part.p_partkey, part.p_mfgr, supplier.s_name, supplier.s_address, supplier.s_phone, supplier.s_acctbal, supplier.s_comment, partsupp.ps_supplycost, nation.n_name, nation.n_regionkey                                                                               |
|               |             Inner Join: supplier.s_nationkey = nation.n_nationkey                                                                                                                                                                                                                         |
|               |               Projection: part.p_partkey, part.p_mfgr, supplier.s_name, supplier.s_address, supplier.s_nationkey, supplier.s_phone, supplier.s_acctbal, supplier.s_comment, partsupp.ps_supplycost                                                                                        |
|               |                 Inner Join: partsupp.ps_suppkey = supplier.s_suppkey                                                                                                                                                                                                                      |
|               |                   Projection: part.p_partkey, part.p_mfgr, partsupp.ps_suppkey, partsupp.ps_supplycost                                                                                                                                                                                    |
|               |                     Inner Join: part.p_partkey = partsupp.ps_partkey                                                                                                                                                                                                                      |
|               |                       Projection: part.p_partkey, part.p_mfgr                                                                                                                                                                                                                             |
|               |                         BytesProcessedNode                                                                                                                                                                                                                                                |
|               |                           Filter: part.p_size = Int32(15) AND part.p_type LIKE Utf8("%BRASS")                                                                                                                                                                                             |
|               |                             TableScan: part projection=[p_partkey, p_mfgr, p_type, p_size], partial_filters=[part.p_size = Int32(15), part.p_type LIKE Utf8("%BRASS")]                                                                                                                    |
|               |                       BytesProcessedNode                                                                                                                                                                                                                                                  |
|               |                         TableScan: partsupp projection=[ps_partkey, ps_suppkey, ps_supplycost]                                                                                                                                                                                            |
|               |                   BytesProcessedNode                                                                                                                                                                                                                                                      |
|               |                     TableScan: supplier projection=[s_suppkey, s_name, s_address, s_nationkey, s_phone, s_acctbal, s_comment]                                                                                                                                                             |
|               |               BytesProcessedNode                                                                                                                                                                                                                                                          |
|               |                 TableScan: nation projection=[n_nationkey, n_name, n_regionkey]                                                                                                                                                                                                           |
|               |           Projection: region.r_regionkey                                                                                                                                                                                                                                                  |
|               |             BytesProcessedNode                                                                                                                                                                                                                                                            |
|               |               Filter: region.r_name = Utf8("EUROPE")                                                                                                                                                                                                                                      |
|               |                 TableScan: region projection=[r_regionkey, r_name], partial_filters=[region.r_name = Utf8("EUROPE")]                                                                                                                                                                      |
|               |       SubqueryAlias: __scalar_sq_1                                                                                                                                                                                                                                                        |
|               |         Projection: min(partsupp.ps_supplycost), partsupp.ps_partkey                                                                                                                                                                                                                      |
|               |           Aggregate: groupBy=[[partsupp.ps_partkey]], aggr=[[min(partsupp.ps_supplycost)]]                                                                                                                                                                                                |
|               |             Projection: partsupp.ps_partkey, partsupp.ps_supplycost                                                                                                                                                                                                                       |
|               |               Inner Join: nation.n_regionkey = region.r_regionkey                                                                                                                                                                                                                         |
|               |                 Projection: partsupp.ps_partkey, partsupp.ps_supplycost, nation.n_regionkey                                                                                                                                                                                               |
|               |                   Inner Join: supplier.s_nationkey = nation.n_nationkey                                                                                                                                                                                                                   |
|               |                     Projection: partsupp.ps_partkey, partsupp.ps_supplycost, supplier.s_nationkey                                                                                                                                                                                         |
|               |                       Inner Join: partsupp.ps_suppkey = supplier.s_suppkey                                                                                                                                                                                                                |
|               |                         TableScan: partsupp projection=[ps_partkey, ps_suppkey, ps_supplycost]                                                                                                                                                                                            |
|               |                         TableScan: supplier projection=[s_suppkey, s_nationkey]                                                                                                                                                                                                           |
|               |                     TableScan: nation projection=[n_nationkey, n_regionkey]                                                                                                                                                                                                               |
|               |                 Projection: region.r_regionkey                                                                                                                                                                                                                                            |
|               |                   Filter: region.r_name = Utf8("EUROPE")                                                                                                                                                                                                                                  |
|               |                     TableScan: region projection=[r_regionkey, r_name], partial_filters=[region.r_name = Utf8("EUROPE")]                                                                                                                                                                  |
| physical_plan | SortPreservingMergeExec: [s_acctbal@0 DESC,n_name@2 ASC NULLS LAST,s_name@1 ASC NULLS LAST,p_partkey@3 ASC NULLS LAST]                                                                                                                                                                    |
|               |   SortExec: expr=[s_acctbal@0 DESC,n_name@2 ASC NULLS LAST,s_name@1 ASC NULLS LAST,p_partkey@3 ASC NULLS LAST], preserve_partitioning=[true]                                                                                                                                              |
|               |     ProjectionExec: expr=[s_acctbal@5 as s_acctbal, s_name@2 as s_name, n_name@7 as n_name, p_partkey@0 as p_partkey, p_mfgr@1 as p_mfgr, s_address@3 as s_address, s_phone@4 as s_phone, s_comment@6 as s_comment]                                                                       |
|               |       CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                                         |
|               |         HashJoinExec: mode=Partitioned, join_type=Inner, on=[(p_partkey@0, ps_partkey@1), (ps_supplycost@7, min(partsupp.ps_supplycost)@0)], projection=[p_partkey@0, p_mfgr@1, s_name@2, s_address@3, s_phone@4, s_acctbal@5, s_comment@6, n_name@8]                                     |
|               |           CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                                     |
|               |             RepartitionExec: partitioning=Hash([p_partkey@0, ps_supplycost@7], 4), input_partitions=4                                                                                                                                                                                     |
|               |               CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                                 |
|               |                 HashJoinExec: mode=Partitioned, join_type=Inner, on=[(n_regionkey@9, r_regionkey@0)], projection=[p_partkey@0, p_mfgr@1, s_name@2, s_address@3, s_phone@4, s_acctbal@5, s_comment@6, ps_supplycost@7, n_name@8]                                                           |
|               |                   CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                             |
|               |                     RepartitionExec: partitioning=Hash([n_regionkey@9], 4), input_partitions=4                                                                                                                                                                                            |
|               |                       CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                         |
|               |                         HashJoinExec: mode=Partitioned, join_type=Inner, on=[(s_nationkey@4, n_nationkey@0)], projection=[p_partkey@0, p_mfgr@1, s_name@2, s_address@3, s_phone@5, s_acctbal@6, s_comment@7, ps_supplycost@8, n_name@10, n_regionkey@11]                                  |
|               |                           CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                     |
|               |                             RepartitionExec: partitioning=Hash([s_nationkey@4], 4), input_partitions=4                                                                                                                                                                                    |
|               |                               ProjectionExec: expr=[p_partkey@0 as p_partkey, p_mfgr@1 as p_mfgr, s_name@3 as s_name, s_address@4 as s_address, s_nationkey@5 as s_nationkey, s_phone@6 as s_phone, s_acctbal@7 as s_acctbal, s_comment@8 as s_comment, ps_supplycost@2 as ps_supplycost] |
|               |                                 CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                               |
|               |                                   HashJoinExec: mode=Partitioned, join_type=Inner, on=[(ps_suppkey@2, s_suppkey@0)], projection=[p_partkey@0, p_mfgr@1, ps_supplycost@3, s_name@5, s_address@6, s_nationkey@7, s_phone@8, s_acctbal@9, s_comment@10]                                      |
|               |                                     CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                           |
|               |                                       RepartitionExec: partitioning=Hash([ps_suppkey@2], 4), input_partitions=4                                                                                                                                                                           |
|               |                                         CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                       |
|               |                                           HashJoinExec: mode=Partitioned, join_type=Inner, on=[(p_partkey@0, ps_partkey@0)], projection=[p_partkey@0, p_mfgr@1, ps_suppkey@3, ps_supplycost@4]                                                                                            |
|               |                                             CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                   |
|               |                                               RepartitionExec: partitioning=Hash([p_partkey@0], 4), input_partitions=4                                                                                                                                                                    |
|               |                                                 ProjectionExec: expr=[p_partkey@0 as p_partkey, p_mfgr@1 as p_mfgr]                                                                                                                                                                       |
|               |                                                   BytesProcessedExec                                                                                                                                                                                                                      |
|               |                                                     CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                           |
|               |                                                       FilterExec: p_size@3 = 15 AND p_type@2 LIKE %BRASS                                                                                                                                                                                  |
|               |                                                         SchemaCastScanExec                                                                                                                                                                                                                |
|               |                                                           RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                            |
|               |                                                             MemoryExec: partitions=1, partition_sizes=[25]                                                                                                                                                                                |
|               |                                             CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                   |
|               |                                               RepartitionExec: partitioning=Hash([ps_partkey@0], 4), input_partitions=4                                                                                                                                                                   |
|               |                                                 BytesProcessedExec                                                                                                                                                                                                                        |
|               |                                                   SchemaCastScanExec                                                                                                                                                                                                                      |
|               |                                                     RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                  |
|               |                                                       MemoryExec: partitions=1, partition_sizes=[98]                                                                                                                                                                                      |
|               |                                     CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                           |
|               |                                       RepartitionExec: partitioning=Hash([s_suppkey@0], 4), input_partitions=4                                                                                                                                                                            |
|               |                                         BytesProcessedExec                                                                                                                                                                                                                                |
|               |                                           SchemaCastScanExec                                                                                                                                                                                                                              |
|               |                                             RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                          |
|               |                                               MemoryExec: partitions=1, partition_sizes=[2]                                                                                                                                                                                               |
|               |                           CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                     |
|               |                             RepartitionExec: partitioning=Hash([n_nationkey@0], 4), input_partitions=4                                                                                                                                                                                    |
|               |                               BytesProcessedExec                                                                                                                                                                                                                                          |
|               |                                 RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                                      |
|               |                                   SchemaCastScanExec                                                                                                                                                                                                                                      |
|               |                                     MemoryExec: partitions=1, partition_sizes=[1]                                                                                                                                                                                                         |
|               |                   CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                             |
|               |                     RepartitionExec: partitioning=Hash([r_regionkey@0], 4), input_partitions=4                                                                                                                                                                                            |
|               |                       ProjectionExec: expr=[r_regionkey@0 as r_regionkey]                                                                                                                                                                                                                 |
|               |                         BytesProcessedExec                                                                                                                                                                                                                                                |
|               |                           CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                     |
|               |                             FilterExec: r_name@1 = EUROPE                                                                                                                                                                                                                                 |
|               |                               RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                                        |
|               |                                 SchemaCastScanExec                                                                                                                                                                                                                                        |
|               |                                   MemoryExec: partitions=1, partition_sizes=[1]                                                                                                                                                                                                           |
|               |           CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                                     |
|               |             RepartitionExec: partitioning=Hash([ps_partkey@1, min(partsupp.ps_supplycost)@0], 4), input_partitions=4                                                                                                                                                                      |
|               |               ProjectionExec: expr=[min(partsupp.ps_supplycost)@1 as min(partsupp.ps_supplycost), ps_partkey@0 as ps_partkey]                                                                                                                                                             |
|               |                 AggregateExec: mode=FinalPartitioned, gby=[ps_partkey@0 as ps_partkey], aggr=[min(partsupp.ps_supplycost)]                                                                                                                                                                |
|               |                   CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                             |
|               |                     RepartitionExec: partitioning=Hash([ps_partkey@0], 4), input_partitions=4                                                                                                                                                                                             |
|               |                       AggregateExec: mode=Partial, gby=[ps_partkey@0 as ps_partkey], aggr=[min(partsupp.ps_supplycost)]                                                                                                                                                                   |
|               |                         CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                       |
|               |                           HashJoinExec: mode=Partitioned, join_type=Inner, on=[(n_regionkey@2, r_regionkey@0)], projection=[ps_partkey@0, ps_supplycost@1]                                                                                                                                |
|               |                             CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                   |
|               |                               RepartitionExec: partitioning=Hash([n_regionkey@2], 4), input_partitions=4                                                                                                                                                                                  |
|               |                                 CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                               |
|               |                                   HashJoinExec: mode=Partitioned, join_type=Inner, on=[(s_nationkey@2, n_nationkey@0)], projection=[ps_partkey@0, ps_supplycost@1, n_regionkey@4]                                                                                                         |
|               |                                     CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                           |
|               |                                       RepartitionExec: partitioning=Hash([s_nationkey@2], 4), input_partitions=4                                                                                                                                                                          |
|               |                                         CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                       |
|               |                                           HashJoinExec: mode=Partitioned, join_type=Inner, on=[(ps_suppkey@1, s_suppkey@0)], projection=[ps_partkey@0, ps_supplycost@2, s_nationkey@4]                                                                                                    |
|               |                                             CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                   |
|               |                                               RepartitionExec: partitioning=Hash([ps_suppkey@1], 4), input_partitions=4                                                                                                                                                                   |
|               |                                                 SchemaCastScanExec                                                                                                                                                                                                                        |
|               |                                                   RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                    |
|               |                                                     MemoryExec: partitions=1, partition_sizes=[98]                                                                                                                                                                                        |
|               |                                             CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                   |
|               |                                               RepartitionExec: partitioning=Hash([s_suppkey@0], 4), input_partitions=4                                                                                                                                                                    |
|               |                                                 SchemaCastScanExec                                                                                                                                                                                                                        |
|               |                                                   RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                    |
|               |                                                     MemoryExec: partitions=1, partition_sizes=[2]                                                                                                                                                                                         |
|               |                                     CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                           |
|               |                                       RepartitionExec: partitioning=Hash([n_nationkey@0], 4), input_partitions=4                                                                                                                                                                          |
|               |                                         RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                              |
|               |                                           SchemaCastScanExec                                                                                                                                                                                                                              |
|               |                                             MemoryExec: partitions=1, partition_sizes=[1]                                                                                                                                                                                                 |
|               |                             CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                                   |
|               |                               RepartitionExec: partitioning=Hash([r_regionkey@0], 4), input_partitions=4                                                                                                                                                                                  |
|               |                                 ProjectionExec: expr=[r_regionkey@0 as r_regionkey]                                                                                                                                                                                                       |
|               |                                   CoalesceBatchesExec: target_batch_size=8192                                                                                                                                                                                                             |
|               |                                     FilterExec: r_name@1 = EUROPE                                                                                                                                                                                                                         |
|               |                                       RepartitionExec: partitioning=RoundRobinBatch(4), input_partitions=1                                                                                                                                                                                |
|               |                                         SchemaCastScanExec                                                                                                                                                                                                                                |
|               |                                           MemoryExec: partitions=1, partition_sizes=[1]                                                                                                                                                                                                   |
|               |                                                                                                                                                                                                                                                                                           |
+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
