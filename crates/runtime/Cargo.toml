[package]
name = "runtime"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
homepage.workspace = true
repository.workspace = true
description = "The spiced runtime"

[dependencies]
snafu.workspace = true
spicepod = { path = "../spicepod" }
app = { path = "../app" }
axum = "0.7.4"
tokio.workspace = true
tracing.workspace = true
clap.workspace = true
metrics.workspace = true
datafusion = "34.0.0"
arrow = "49.0.0"
arrow-flight = "49.0.0"
arrow-ipc = "49.0.0"
tonic = "0.10.2"
futures = "0.3.30"
uuid = "1.6.1"
tokio-stream = "0.1"
async-stream = "0.3.5"
futures-core = "0.3"
dirs = "5.0.1"
toml = "0.8.8"
serde.workspace = true
flight_client = { version = "0.10.0-alpha.0", path = "../flight_client" }
duckdb = { git = "https://github.com/spicehq/duckdb-rs.git", rev = "c36fe7041a080ef457d4931985d28ca231de4139",  features = ["bundled", "r2d2", "vtab", "vtab-arrow"], optional = true }
duckdb_datafusion = { path = "../duckdb_datafusion", optional = true }
r2d2 = { version = "0.8.10", optional = true }

[features]
default = ["duckdb"]
dev = []
duckdb = ["dep:duckdb", "duckdb_datafusion", "r2d2"]