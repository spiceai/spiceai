[package]
name = "data_components"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
homepage.workspace = true
repository.workspace = true
exclude.workspace = true

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
arrow.workspace = true
arrow-flight.workspace = true
async-stream.workspace = true
datafusion.workspace = true
futures.workspace = true
async-trait.workspace = true
r2d2 = { workspace = true, optional = true }
snafu.workspace = true
tokio.workspace = true
tracing.workspace = true
flight_client = { path = "../flight_client" }
sql_provider_datafusion = { path = "../sql_provider_datafusion" }
secrets = { path = "../secrets" }
deltalake = { version = "0.17.0", features = ["datafusion-ext", "s3", "azure"] }
serde.workspace = true
reqwest = { version = "0.11.24", features = ["json"] }
db_connection_pool = { path = "../db_connection_pool" }
duckdb = { workspace = true, features = ["bundled", "r2d2", "vtab", "vtab-arrow"], optional = true }
tonic = { workspace = true, optional = true }
bb8 = { workspace = true, optional = true }
bb8-postgres = { workspace = true, optional = true }
postgres-native-tls = { version = "0.5.0", optional = true }
mysql_async = { workspace = true, optional = true }

[features]
duckdb = ["dep:duckdb", "dep:r2d2"]
flightsql = ["dep:tonic", "dep:r2d2"]
postgres = ["dep:bb8", "dep:bb8-postgres", "dep:postgres-native-tls"]
mysql = ["dep:mysql_async"]