# Spice v0.12.2-alpha (May 13, 2024)

The v0.12.2-alpha release adds data streaming and key-pair authentication support for Snowflake, makes connectivity error messages clearer and more actionable, brings nested folders support for the S3 data connector, and exposes nodeSelector and affinity keys in Helm to better manage Spice Kubernetes deployments.

## Highlights

- **Friendlier Database Connectivity Error Messages**: Error messages have been improved for misconfigured access settings or when the database is unreachable, providing clearer, actionable guidance.

- **Snowflake Data Streaming and Key-Pair Auth**: Enables data streaming by default, eliminating in-memory result collection. Now supports [key-pair](https://docs.snowflake.com/en/user-guide/key-pair-auth) authentication in addition to password-based.

- **API to update Refresh SQL**: Update dataset Refresh SQL via API.

- **Docker Image Update**: The `spiceai/spiceai:latest` Docker image now includes an enabled ODBC data connector. For a smaller footprint, use the spiceai/spiceai:latest-slim version.

- **nodeSelector and affinity keys in Helm**: use nodeSelector and affinity keys in Helm to better manage Spice Kubernetes deployments

## Breaking Changes

- API to trigger accelerated dataset refresh changed from `POST /v1/datasets/:name/refresh` to `POST /v1/datasets/:name/acceleration/refresh`

## Contributors

- @mach-kernel
- @y-f-u
- @sgrebnov
- @ewgenius
- @Jeadie
- @Sevenannn
- @digadeesh
- @phillipleblanc
- @lukekim

## What's Changed

- Fix list type support in spark connect by @y-f-u in https://github.com/spiceai/spiceai/pull/1341
- Add nested folder support in S3 Parquet connector by @y-f-u in https://github.com/spiceai/spiceai/pull/1342
- Improves S3 connector using DataFusion ListingTable table provider by @y-f-u in https://github.com/spiceai/spiceai/pull/1326
- Update ROADMAP May 6, 2024 by @lukekim in https://github.com/spiceai/spiceai/pull/1315
- List flightsql and snowflake as supported connectors in README.md by @sgrebnov in https://github.com/spiceai/spiceai/pull/1317
- Helm chart for v0.12.1-alpha by @ewgenius in https://github.com/spiceai/spiceai/pull/1323
- Read sqlite_file param and use it as path by @Sevenannn in https://github.com/spiceai/spiceai/pull/1309
- Compile spiced with `release` feature in docker image by @ewgenius in https://github.com/spiceai/spiceai/pull/1324
- Add support for Snowflake key-pair authentication by @sgrebnov in https://github.com/spiceai/spiceai/pull/1314
- Wrap postgres errors in common DataConnectorError by @ewgenius in https://github.com/spiceai/spiceai/pull/1327
- Fix TPCH tests runner by @sgrebnov in https://github.com/spiceai/spiceai/pull/1330
- Spice CLI support for Snowflake key-pair auth by @sgrebnov in https://github.com/spiceai/spiceai/pull/1325
- sql_provider_datafusion: Support TimestampMicrosecond, Date32, Date64 by @mach-kernel in https://github.com/spiceai/spiceai/pull/1329
- Resolve dangling reference for SQLite by @Sevenannn in https://github.com/spiceai/spiceai/pull/1312
- Select columns from Spark Dataframe according to projected_schema by @Sevenannn in https://github.com/spiceai/spiceai/pull/1336
- Expose nodeselector and affinity keys in Helm chart by @mach-kernel in https://github.com/spiceai/spiceai/pull/1338
- Use streaming for Snowflake queries by @sgrebnov in https://github.com/spiceai/spiceai/pull/1337
- Publish ODBC images by @mach-kernel in https://github.com/spiceai/spiceai/pull/1271
- Include Postgres acceleration engine to types support tests by @sgrebnov in https://github.com/spiceai/spiceai/pull/1343
- Refactor dataconnector providers getters to return common `DataConnectorResult` and `DataConnectorError` by @ewgenius in https://github.com/spiceai/spiceai/pull/1339
- s3 csv support to validate the listing table extensibility by @y-f-u in https://github.com/spiceai/spiceai/pull/1344
- Move model code into separate, feature-flagged crate by @Jeadie in https://github.com/spiceai/spiceai/pull/1335
- Initial setup for federated queries by @phillipleblanc in https://github.com/spiceai/spiceai/pull/1350
- Refactor dbconnection errors, and catch invalid postgres table name case by @ewgenius in https://github.com/spiceai/spiceai/pull/1353
- Rename default datafusion catalog to "spice", add internal "spice.runtime" schema by @ewgenius in https://github.com/spiceai/spiceai/pull/1359
- Add API to set Refresh SQL for accelerated table by @sgrebnov in https://github.com/spiceai/spiceai/pull/1356
- Set next version to v0.12.2 by @phillipleblanc in https://github.com/spiceai/spiceai/pull/1367
- Upgrade to DataFusion 38 by @phillipleblanc in https://github.com/spiceai/spiceai/pull/1368

**Full Changelog**: https://github.com/spiceai/spiceai/compare/v0.12.1-alpha...v0.12.2-alpha
